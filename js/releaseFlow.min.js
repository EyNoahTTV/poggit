$(function(){function p(a,b,d,e,c){var f=d-a,k=e-b,g=f*f+k*k;console.assert(0<g);var l=5E3<g?8:5;g=Math.sqrt(l*l/g);l=d-f*g;var h=e-k*g;a="M"+a+","+b+("L"+d+","+e)+("L"+(l-k*g)+","+(h+f*g));a+="L"+(l+k*g)+","+(h-f*g);a+="L"+d+","+e;null==c&&(c=document.createElementNS("http://www.w3.org/2000/svg","path"),q(c));c.setAttribute("d",a);return c}function q(a){a.setAttribute("stroke","black");a.setAttribute("fill","black")}var h=document.getElementById("flow-svg"),c=h.getElementsByClassName("state"),f;
for(f in c)if(c.hasOwnProperty(f)){var a=c[f],b=document.createElementNS("http://www.w3.org/2000/svg","rect"),d=a.getBBox();b.setAttribute("x",d.x-10);b.setAttribute("y",d.y-5);b.setAttribute("width",d.width+20);b.setAttribute("height",d.height+10);b.setAttribute("fill",a.getAttribute("fill"));b.setAttribute("title",a.getAttribute("title"));h.insertBefore(b,a);a.setAttribute("fill",a.getAttribute("stroke"));$(b).tooltip();$(a).tooltip()}c=h.getElementsByClassName("arrow");for(f in c)if(c.hasOwnProperty(f)){a=
c[f];b=a.getAttribute("d");var e=/^\s*M\s*(\d+)\s*,\s*(\d+)\s*L\s*(\d+)\s*,\s*(\d+)\s*$/i.exec(b);b=Number(e[1]);d=Number(e[2]);var n=Number(e[3]);e=Number(e[4]);p(b,d,n,e,a);if(a.hasAttribute("data-arrow-reject")){var m=a.getAttribute("data-arrow-reject").split(",");m=p((b+n)/2,(d+e)/2,Number(m[0]),Number(m[1]));h.insertBefore(m,a)}a.hasAttribute("data-comment")&&(a.setAttribute("title",a.getAttribute("data-comment")),$(a).tooltip());q(a);1E3<Math.pow(n-b,2)+Math.pow(e-d,2)&&!a.hasAttribute("stroke-dasharray")&&
a.setAttribute("stroke-width","5")}});
